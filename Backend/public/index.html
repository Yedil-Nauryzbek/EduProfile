 <!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Profil Edu Onboarding + Registration</title>

<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  html, body {
    height: 100%;
    font-family: 'Segoe UI', Roboto, sans-serif;
    background: #f5f7fa;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  #onboarding, #registerScreen {
    width: 95%;
    max-width: 500px;
    background: white;
    border-radius: 25px;
    box-shadow: 0 15px 40px rgba(0,0,0,0.15);
    overflow: hidden;
    text-align: center;
    padding: 2rem;
    position: relative; /* вместо absolute */
  }

  #registerScreen {
    display: none;
  }
  #loginScreen {
  width: 95%;
  max-width: 500px;
  background: white;
  border-radius: 25px;
  box-shadow: 0 15px 40px rgba(0,0,0,0.15);
  overflow: hidden;
  text-align: center;
  padding: 2rem;
  position: relative;
}


  #registerScreen.active {
    display: block;
  }

  .slide { display: none; transition: all 0.5s ease; }
  .slide.active { display: block; }

  .slide img { max-width: 250px; margin-bottom: 1.5rem; }
  .slide h2 { font-size: 1.8rem; margin-bottom: 1rem; color: #333; }
  .slide p { font-size: 1rem; color: #555; margin-bottom: 2rem; }

  .controls { display: flex; justify-content: space-between; padding: 1rem 0; }
  button {
    padding: 0.7rem 1.5rem;
    border-radius: 50px;
    border: none;
    font-weight: bold;
    cursor: pointer;
    transition: 0.2s;
  }
  button#prev { background: #e0e0e0; color: #555; }
  button#next { background: #0072ff; color: white; }
  button:hover { opacity: 0.9; transform: scale(1.05); }

  form { display: flex; flex-direction: column; gap: 1rem; }
  input { padding: 0.8rem; border-radius: 15px; border: 1px solid #ccc; font-size: 1rem; }

  .progress-bar { height: 5px; width: 100%; background: #e0e0e0; margin-top: -5px; }
  .progress { height: 5px; background: #0072ff; width: 0%; transition: width 0.3s ease; }

  @media (max-width: 600px) {
    .slide h2 { font-size: 1.5rem; }
    .slide p { font-size: 0.9rem; }
    .slide img { max-width: 200px; }
  }
</style>
</head>
<body>

<!-- Онбординг -->
<div id="onboarding" class="active">
  <h1 style="margin-bottom: 1rem; font-size: 2rem; font-weight: 700; color: #222;">EduProfile</h1>

  <div class="slide active">
    <img src="https://img.icons8.com/color/200/handshake.png" alt="Welcome">
    <h2>Добро пожаловать!</h2>
    <p>Profil Edu поможет тебе организовать учебу.</p>
  </div>
  <div class="slide">
    <img src="https://img.icons8.com/color/200/task.png" alt="Tasks">
    <h2>Следи за задачами</h2>
    <p>Добавляй задачи и контролируй прогресс.</p>
  </div>
  <div class="slide">
    <img src="https://img.icons8.com/color/200/analytics.png" alt="Analytics">
    <h2>Анализируй прогресс</h2>
    <p>Смотри статистику и улучшай эффективность.</p>
  </div>
  <div class="slide">
    <img src="https://img.icons8.com/color/200/rocket.png" alt="Start">
    <h2>Начнем?</h2>
    <p>Жми «Далее», чтобы зарегистрироваться.</p>
  </div>

  <div class="progress-bar"><div class="progress" id="progress"></div></div>
  <div class="controls">
    <button id="prev">Назад</button>
    <button id="next">Далее</button>
  </div>
</div>

<!-- Регистрация -->
<div id="registerScreen">
  <h2>Регистрация</h2>
  <form id="registerForm">
    <input type="text" name="name" placeholder="Имя" required />
    <input type="email" name="email" placeholder="Email" required />
    <input type="password" name="password" placeholder="Пароль" required />
    <button type="submit">Зарегистрироваться</button>
    <p style="margin-top:1rem; cursor:pointer; color:#0072ff;" id="goLogin">У меня уже есть аккаунт</p>

  </form>
</div>
<!-- Вход -->
<div id="loginScreen" style="display:none;">
  <h2>Вход</h2>
  <form id="loginForm">
    <input type="email" name="email" placeholder="Email" required />
    <input type="password" name="password" placeholder="Пароль" required />
    <button type="submit">Войти</button>
  </form>
</div>


<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
import { 
  getAuth, 
  createUserWithEmailAndPassword,
  signInWithEmailAndPassword 
} from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyD-EKmkX9G_n9O6vYPVtdkaRq7qBYUKnHo",
  authDomain: "eduprofile-74773.firebaseapp.com",
  projectId: "eduprofile-74773",
  storageBucket: "eduprofile-74773.appspot.com",
  messagingSenderId: "592512521706",
  appId: "1:592512521706:web:3445fbd3449a4df6fbce93",
  measurementId: "G-LQ636RXGDW"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

// Онбординг
document.addEventListener('DOMContentLoaded', () => {
  const slides = document.querySelectorAll('.slide');
  const nextBtn = document.getElementById('next');
  const prevBtn = document.getElementById('prev');
  const progress = document.getElementById('progress');
  const onboarding = document.getElementById('onboarding');
  const registerScreen = document.getElementById('registerScreen');
  let current = 0;

  function showSlide(index) {
    slides.forEach((slide,i)=>{
      slide.classList.remove('active');
      if(i===index) slide.classList.add('active');
    });
    progress.style.width = ((index+1)/slides.length*100)+'%';
  }

  nextBtn.addEventListener('click', ()=>{
    if(current<slides.length-1){
      current++;
      showSlide(current);
    } else {
      onboarding.classList.remove('active');
      registerScreen.classList.add('active');
    }
  });

  prevBtn.addEventListener('click', ()=>{
    if(current>0){
      current--;
      showSlide(current);
    }
  });

  // регистрация
  document.getElementById('registerForm').addEventListener('submit', async (e)=>{
    e.preventDefault();
    const form = e.target;
    const name = form.name.value;
    const email = form.email.value;
    const password = form.password.value;

    try {
      await createUserWithEmailAndPassword(auth, email, password);
      window.location = "home.html";
      alert(`Регистрация успешна! Добро пожаловать, ${name}`);
      registerScreen.style.display='none';
    } catch(err) {
      alert('Ошибка регистрации: ' + err.message);
    }
  });
});

// Вход
const loginScreen = document.getElementById('loginScreen');
const loginForm = document.getElementById('loginForm');
const goLogin = document.getElementById('goLogin');
const registerScreen = document.getElementById('registerScreen');

// переход к логину
goLogin.addEventListener('click', () => {
  registerScreen.style.display = 'none';
  loginScreen.style.display = 'block';
});

// вход
loginForm.addEventListener('submit', async (e) => {
  e.preventDefault();
  const email = loginForm.email.value;
  const password = loginForm.password.value;

  try {
    await signInWithEmailAndPassword(auth, email, password);
    window.location = "home.html";
    alert("Вход выполнен успешно");
  } catch (err) {
    alert("Ошибка: " + err.message);
  }
});
</script>
